:root{--bg:#020617;--bg-elevated:#020617;--card:#0f172af5;--card-border:#94a3b859;--text-main:#fff;--text-muted:#9ca3af;--accent:#22c55e;--accent-soft:#22c55e2e;--accent-strong:#4ade80;--danger:#fb7185;--radius-lg:18px}*,:before,:after{box-sizing:border-box}body{min-height:100vh;color:var(--text-main);background:radial-gradient(circle at 0 0,#020617 0 45%,#000 100%);margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,SF Pro Text,sans-serif}#root{min-height:100vh}.app-root{max-width:1280px;min-height:100vh;margin:0 auto;padding:24px 28px 32px}.app-header{justify-content:space-between;align-items:flex-end;gap:16px;margin-bottom:24px;display:flex}.app-header h1{letter-spacing:.02em;margin:0 0 4px;font-size:1.8rem}.app-subtitle{color:var(--text-muted);align-items:center;gap:8px;margin:0;font-size:.9rem;display:flex}.header-meta{align-items:center;gap:12px;display:flex}.env-pill{color:var(--text-muted);background:#0f172ae6;border:1px solid #94a3b880;border-radius:999px;padding:6px 12px;font-size:.8rem}.badge{background:var(--accent-soft);color:var(--accent-strong);border:1px solid #22c55eb3;border-radius:999px;padding:2px 8px;font-size:.75rem}.app-grid{grid-template-columns:260px minmax(0,1.4fr) 320px;gap:20px;display:grid}.card{background:var(--card);border-radius:var(--radius-lg);border:1px solid var(--card-border);-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);padding:18px 18px 20px;box-shadow:0 18px 45px #0f172ad9}.card-header{justify-content:space-between;align-items:center;gap:8px;margin-bottom:10px;display:flex}.card-header h2{margin:0;font-size:1rem}.card-helper{color:var(--text-muted);margin:0 0 12px;font-size:.8rem}.section-title{margin:0 0 8px;font-size:.95rem}.btn-primary{background:var(--accent);color:#052e16;cursor:pointer;border:none;border-radius:999px;padding:6px 12px;font-size:.78rem;font-weight:500;transition:transform .12s,box-shadow .12s,background .12s;box-shadow:0 0 0 1px #15803d80,0 8px 20px #22c55e66}.btn-primary:hover{background:var(--accent-strong);transform:translateY(-1px);box-shadow:0 10px 26px #22c55e8c}.btn-primary:active{transform:translateY(0);box-shadow:0 6px 16px #22c55e80}.pill-soft{color:var(--text-muted);background:#0f172ae6;border:1px solid #94a3b880;border-radius:999px;padding:4px 10px;font-size:.75rem}.patient-list{flex-direction:column;gap:8px;display:flex}.patient-pill{cursor:pointer;width:100%;text-align:centre;background:#0f172a;border:1px solid #334155e6;border-radius:12px;flex-direction:column;justify-content:center;align-items:center;gap:6px;padding:14px 10px;transition:border .12s,background .12s,transform .1s;display:flex}.patient-pill:hover{border-color:#94a3b8e6;transform:translateY(-1px)}.patient-pill-active{border-color:var(--accent-strong);background:radial-gradient(circle at 0 0,#052e16,#020617 55%);box-shadow:0 10px 24px #16a34a8c}.patient-pill-main{flex-direction:column;align-items:center;gap:2px;display:flex}.patient-name{color:#fff;font-size:.88rem;font-weight:500}.patient-condition{color:#9ca3afb3;font-size:.76rem}.patient-stage-chip{background:var(--accent-soft);color:var(--accent-strong);white-space:nowrap;border:1px solid #22c55ebf;border-radius:999px;margin-top:4px;padding:4px 8px;font-size:.7rem}.overview-grid{grid-template-columns:repeat(3,minmax(0,1fr));gap:12px 18px;margin-bottom:16px;display:grid}.label{color:var(--text-muted);margin:0 0 2px;font-size:.75rem}.notes-block{margin-bottom:12px}.notes-block p{margin:0}.pill-row{flex-wrap:wrap;align-items:center;gap:8px;margin-bottom:6px;display:flex}.stage-pill{background:var(--accent-soft);color:var(--accent-strong);border:1px solid #22c55ecc;border-radius:999px;padding:6px 14px;font-size:.8rem}.hint-text{color:var(--text-muted);margin:0;font-size:.75rem}.divider{opacity:.7;background:radial-gradient(circle,#94a3b8b3,#0000);height:1px;margin:10px 0 12px}.behaviour-level{margin-bottom:10px}.behaviour-title{margin:0 0 4px;font-size:.92rem}.behaviour-summary{color:var(--text-muted);margin:0;font-size:.8rem}.stages-rail{flex-direction:column;gap:8px;display:flex}.stage-node{color:var(--text-muted);background:radial-gradient(circle at 0,#020617,#020617 55%,#000);border:1px dashed #4b5563cc;border-radius:14px;padding:8px 10px;font-size:.8rem}.stage-node-active{border-style:solid;border-color:var(--accent-strong);color:#bbf7d0;background:radial-gradient(circle at 0,#052e16,#020617 60%);box-shadow:0 10px 26px #16a34a8c}.quest-list{flex-direction:column;gap:8px;margin:0 0 10px;padding:0;list-style:none;display:flex}.quest-item{align-items:flex-start;gap:8px;font-size:.8rem;display:flex}.quest-checkbox{border:1px solid #94a3b8b3;border-radius:4px;width:14px;height:14px;margin-top:3px}.xp-block{margin-bottom:10px}.xp-header{justify-content:space-between;align-items:baseline;gap:8px;margin-bottom:6px;display:flex}.xp-level{font-size:.9rem;font-weight:600;position:relative}.xp-numbers{color:var(--text-muted);font-size:.8rem}.xp-bar-wrapper{margin-bottom:4px;position:relative}.xp-bar{background:radial-gradient(circle at 0,#020617,#020617 55%,#000);border:1px solid #374151e6;border-radius:999px;width:100%;height:10px;position:relative;overflow:hidden;box-shadow:inset 0 0 10px #0f172ae6}.xp-bar-fill{border-radius:inherit;background:linear-gradient(90deg,#22c55e,#4ade80,#a3e635);height:100%;transition:width .22s ease-out;box-shadow:0 0 16px #22c55eb3}.xp-hint{color:var(--text-muted);margin:6px 0 0;font-size:.75rem}.xp-test-btn{width:100%;text-align:centre;margin-top:10px}.xp-gain-float{color:#bbf7d0;text-shadow:0 0 10px #22c55e;pointer-events:none;font-size:.9rem;font-weight:700;animation:1.4s ease-out forwards xpFloat;position:absolute;top:-10px;right:6px}@keyframes xpFloat{0%{opacity:0;transform:translateY(6px)scale(.9)}10%{opacity:1}60%{opacity:1;transform:translateY(-10px)scale(1.05)}to{opacity:0;transform:translateY(-30px)scale(1)}}.xp-bar-pulse{animation:.6s ease-out xpPulse}@keyframes xpPulse{0%{transform:scale(1);box-shadow:inset 0 0 10px #0f172ae6}40%{transform:scale(1.03);box-shadow:0 0 22px #22c55ef2}to{transform:scale(1);box-shadow:inset 0 0 10px #0f172ae6}}.xp-level-flash{animation:.6s ease-out xpLevelPop}.xp-level-flash:before{content:"";pointer-events:none;border:1px solid #bef264e6;border-radius:999px;animation:.6s ease-out xpRing;position:absolute;inset:-4px -8px;box-shadow:0 0 #bef264b3}@keyframes xpLevelPop{0%{color:#e5e7eb;transform:scale(1)}30%{color:#bbf7d0;transform:scale(1.15)}to{color:#f9fafb;transform:scale(1)}}@keyframes xpRing{0%{opacity:.9;transform:scale(1);box-shadow:0 0 #bef264b3}to{opacity:0;transform:scale(1.4);box-shadow:0 0 0 14px #bef26400}}.levelup-popup{pointer-events:none;z-index:40;justify-content:center;align-items:center;animation:1.8s ease-out forwards levelPopupFade;display:flex;position:fixed;inset:0}.levelup-img{width:280px;max-width:80vw;image-rendering:pixelated;transform-origin:50%;animation:.6s cubic-bezier(.2,1.3,.3,1) levelPopupPop}@keyframes levelPopupPop{0%{filter:brightness(.8);transform:scale(.6)}60%{filter:brightness(1.1);transform:scale(1.05)}to{filter:brightness();transform:scale(1)}}@keyframes levelPopupFade{0%{opacity:0}10%{opacity:1}to{opacity:0}}@keyframes screenShake{0%{transform:translate(0)}20%{transform:translate(-4px,2px)}40%{transform:translate(3px,-3px)}60%{transform:translate(-2px,4px)}80%{transform:translate(3px,-1px)}to{transform:translate(0)}}.screen-shake{animation:.35s ease-in-out screenShake}.confetti{pointer-events:none;z-index:60;width:100%;height:100%;position:fixed;top:0;left:0}.confetti-piece{background:var(--c);opacity:0;width:8px;height:8px;image-rendering:pixelated;animation:.9s ease-out forwards confettiPop;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)scale(.8)}@keyframes confettiPop{0%{opacity:1;transform:translate(-50%,-50%)scale(.8)rotate(0)}70%{opacity:1;transform:translate(calc(-50% + var(--x)),calc(-50% + var(--y)))scale(1)rotate(180deg)}to{opacity:0;transform:translate(calc(-50% + var(--x)),calc(-50% + var(--y)))scale(.9)rotate(270deg)}}.mode-toggle{background:#0f172ae6;border:1px solid #94a3b899;border-radius:999px;gap:4px;padding:3px;display:inline-flex}.mode-btn{color:var(--text-muted);cursor:pointer;background:0 0;border:none;border-radius:999px;padding:4px 10px;font-size:.78rem}.mode-btn-active{color:#e5e7eb;background:#1e40afb3}.patient-main{max-width:720px;margin:0 auto}.form-grid{gap:12px;margin:10px 0 16px;display:grid}.form-field{flex-direction:column;gap:4px;display:flex}.input{color:var(--text-main);background:#020617;border:1px solid #94a3b899;border-radius:10px;padding:8px 10px;font-size:.9rem}.input:focus{border-color:var(--accent-strong);outline:none;box-shadow:0 0 0 1px #22c55e99}.full-width-btn{width:100%;margin-top:4px}.narrative-block{color:var(--text-main);flex-direction:column;gap:8px;margin:8px 0 16px;font-size:.9rem;display:flex}.narrative-type p{white-space:pre-line;position:relative}.narrative-type p:after{content:"â–Œ";margin-left:2px;animation:.9s step-end infinite blinkCursor;display:inline-block}@keyframes blinkCursor{0%,50%{opacity:1}50.1%,to{opacity:0}}.character-preview{align-items:centre;gap:14px;margin:10px 0 16px;display:flex}.portal-preview{margin-bottom:16px}.avatar-circle{border:2px solid var(--accent-strong);align-items:centre;justify-content:centre;background:radial-gradient(circle,#052e16,#020617 70%);border-radius:999px;width:52px;height:52px;display:flex;box-shadow:0 0 18px #22c55e99}.avatar-initial{color:#bbf7d0;font-size:1.5rem;font-weight:700}.character-text{flex-direction:column;gap:2px;display:flex}.character-title{margin:0;font-size:.95rem}.character-sub{color:var(--text-muted);margin:0;font-size:.8rem}.portal-grid{gap:14px;margin-bottom:10px;display:grid}.side-section-header h3{margin:0 0 6px;font-size:.95rem}.wizard-wrapper{justify-content:center;align-items:center;margin:1.5rem 0;display:flex}.wizard-container{display:inline-block;position:relative}.wizard-img{width:220px;height:auto;margin:0 auto;display:block}.wizard-mouth{pointer-events:none;z-index:2;background:#111827;border-radius:999px;width:28px;height:10px;animation:.6s infinite wizardTalk;position:absolute;top:46%;left:55%;transform:translate(-50%,-50%)}@keyframes wizardTalk{0%{height:6px}25%{height:13px}50%{height:7px}75%{height:11px}to{height:6px}}
